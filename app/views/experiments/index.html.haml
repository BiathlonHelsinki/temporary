.experiments_index
  .row.expanded
    .small-12.columns
      %h1
        = t :experiments
        = link_to fa_icon('calendar'), calendar_experiments_path
  .row.expanded#expandme.small-up-1.medium-up-2.large-up-4.xxlarge-up-5{:"data-equalizer" => '', :"data-equalize-by-row" => "true"}
    - only_one_openday = false
    - @experiments.each do |e|
      
      - if e.experiment.slug == 'open-days'
        - next if only_one_openday == true
        - only_one_openday = true
      = render partial: 'instances/experiment_instance_column', locals: {exp: e, :"@experiment" =>  e.experiment }
      / - exp = e.first
      / - if exp.slug == 'open-days' || e.last.size == 1
      /   = link_to exp, class: [:experiment, :column] do
      /
      /     .content{:"data-equalizer-watch" => ''}

      /       .title.text-center= exp.name
      /       .body.text-center= truncate_html(exp.description, length: 110)
      /       .earn_line
      /         = raw "Earn #{exp.cost_bb}#{tsign} for participating!"
      /
      /       .participants
      /         = pluralize(exp.instances.map(&:users).flatten.size + exp.instances.map(&:onetimers).flatten.size, 'person') + " have participated"
    
      / - next if exp.slug == 'open-days'
      / - exp.instances.current.or(exp.instances.future).sort_by(&:start_at).each do |i|
      / = render partial: 'instances/experiment_instance_column', locals: {exp: i, :"@experiment" =>  exp }
        
  .row.expanded
    .small-12.columns
      %h1
        = t :in_the_past

  .row.expanded#expandme.small-up-1.medium-up-2.large-up-4.xxlarge-up-5{:"data-equalizer" => '', :"data-equalize-by-row" => "true"}
    - @past.reverse.each do |exp|
      = render partial: 'instances/experiment_instance_column', locals: {exp: exp, :"@experiment" =>  exp.experiment}
