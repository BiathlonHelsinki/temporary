.activities_index
  .row.expanded
    .small-12.columns
      %h1 Activity
  - if params[:user_id]
    .row
      .small-8.columns.small-centered
        %h3
          Showing all activity for user
          = @user.display_name
  .row.expanded
    .small-12.columns
      %table.activities#activities
        %thead
          %tr
            %th Date
            %th Who
            %th Activity
            %th Subject
            %th
              = raw tsign
              %small= link_to '?', '#', onclick: "javascript:$('.occluded').slideToggle();return false"
              .occluded
                = fa_icon('plus') + ": created"
                %br/
                = fa_icon('minus') + ": spent"
                %br/
                = fa_icon('smile-o') + "/" + fa_icon('frown-o') + ': pledged/withdrawn'
                %br/
                = fa_icon('arrows-h') + ": transferred"
            %th Info
        %tfoot
          %tr
            %td{:colspan => "4"} Â 
            %td
              = @activities.where(addition: 1).sum{|x| x.value.to_i} - @activities.where(addition: -1).sum{|x| x.value.to_i}
            %td
        %tbody.page
          = render @activities
  .row.expanded
    .small-12.columns= paginate @activities

= content_for :jquery do
  :plain
    $('table.activities').stacktable();
    $("#activities .page").infinitescroll({navSelector: "nav.pagination", nextSelector: "nav.pagination a[rel=next]", itemSelector: "#activities tr.activity",  loading: { msgText: 'Loading the next set of activities....' }});